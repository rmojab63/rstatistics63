---
title: "مثال ۲-۲: محاسبهٔ یک ماتریس مقدماتی تصادفی (توضیح بلوک `if-else`)"
author: "رامین مجاب"
output: md_document
---
##  مثال ۲-۲: محاسبهٔ یک ماتریس مقدماتی تصادفی (توضیح بلوک `if-else`)
<p style='font-size: 0.8em;'><b>نویسنده:</b> <span>رامین مجاب</span></p>

**(صفحهٔ ۵۷ کتاب)**

در این مثال، یک کد پیچیده‌تر نسبت به آنچه تاکنون بحث کرده‌ایم، می‌نویسیم.  هدف آن است که تابعی داشته باشیم که به‌طور تصادفی یک ماتریس مقدماتی ایجاد کند. برای این هدف، تابع به یک ورودی نیازمند است: اندازهٔ ماتریس مربع. کد زیر را ملاحظه کنید:

``` r
> #' Create an elementary matrix
> #' It performs random elementary row operation.
> #'
> #' @param n  size of the elementary matrix to create (n by n)
> #'
> #' @return An n by n random elementary matrix
> random.elementary.matrix <- function(n) {
+   E <- diag(n) # Create an n by n identity matrix
+ 
+   op <- sample(1:3, 1) # A random elementary row operation
+   r1 <- sample(1:n, 1) # 1st random row to operate on
+   r2 <- sample(1:n, 1) # 2nd random row to operate on
+   a <- runif(1, -10, 10) # A random number between -10 and 10
+ 
+   if (op == 1) {
+     # Swap two rows:
+     E[c(r1, r2), ] <- E[c(r2, r1), ]
+   } else if (op == 2) {
+     # Multiply a row by a nonzero scalar:
+     E[r1, ] <- a * E[r1, ]
+   } else {
+     # Add a multiple of one row to another row:
+     E[r1, ] <- E[r1, ] + a * E[r2, ]
+   }
+ 
+   E
+ }
```
دربارهٔ ساختار یک تابع در **R** در [مثال ۱-۳](matrix_book_fa_example1.3) صحبت کردیم و بنابراین از آن می‌گذریم. همچنین، توضیحاتی برای دستورات در هر خط یا هر بلوک ارائه شده است. در اینجا، کلیات و برخی از دستورات دیگر توضیح داده می‌شود:

- نمونه‌ای از بلوک‌های `if-else` در کد وجود دارد. بسته به اینکه کدام شرط برقرار است، دستورات درون  آن بلوک اجرا می‌شود. در این کد، ارزش `op` که مقابل هر `if` نوشته شده است، به‌طور تصادفی توسط دستور `sample()` انتخاب می‌شود و نوع عملیات سطری را مشخص می‌کند.

- تابع `runif()` که نام آن از عبارت <span dir="ltr">random uniform</span> گرفته شده است، یک عدد حقیقی بین $-10$ و $10$ تولید می‌کند. احتمال آنکه این عدد تصادفی صفر شود و بنابراین مطابق با تعریف یک عملیات سطری رخ ندهد، ناچیز است (هرچند اگر می‌خواهید مطمئن باشید، بهتر است شرطی برای بررسی آن اضافه کنید).
- کد `E(r1,)`، از گرامرهای **R** برای ارزش‌گذاری یا گرفتن ارزش‌های زیربخشی از ماتریس‌هاست و قبلاً بحث شده است. به‌طور خاص، این کد به سطر با ایندکس `r1` اشاره می‌کند. به‌طور مشابه، کد `E[c(r1, r2),]` به دو سطر با ایندکس‌های  `r1` و `r2` اشاره می‌کند. نظم ایندکس‌ها در بردار `c(r1, r2)` مهم است و به همین دلیل است که می‌توان با تغییر نظم آن‌ها، عملیات جابه‌جایی سطرها را در یک خط کد انجام داد.

کد زیر نحوهٔ استفاده از این تابع را نشان می‌دهد:

``` r
> set.seed(432)
> random.elementary.matrix(3)
```

```
#      [,1] [,2]      [,3]
# [1,]    1    0 -6.520095
# [2,]    0    1  0.000000
# [3,]    0    0  1.000000
```
تابع `set.seed()` باعث می‌شود که در هر بار تکرار این کد، ارزش‌های یکسانی برای توابعی که عدد تصادفی ایجاد می‌کنند، یعنی `sample()` و `runif()`، ایجاد شود.  در این مثال و با توجه به خروجی دستور، نوع عملیات سطری را بگویید و به‌عنوان تمرین، تابع مشابهی برای انجام عملیات‌های ستونی بنویسید (آن‌ها را بحث نکرده‌ایم، اما مشابه‌اند).



<p style='margin-bottom:3cm;'></p><hr/>

- [مثال ۲-۱: محاسبهٔ ترانهاده، دترمینان، و اثر (معرفی برخی توابع و عملیات‌ها)](matrix_book_fa_example2.1.html)
- [مثال ۳-۲: انجام فرایند حذف گاوسی (توضیح حلقهٔ `for`)](matrix_book_fa_example2.3.html)
- [<b>لیست مثال‌ها</b>](matrix_book_fa.html)
