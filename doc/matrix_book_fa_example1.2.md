---
title: "مثال ۱-۲: شناسایی نوع ماتریس‌ها (ادامهٔ مقدمه‌ای بر برنامه‌نویسی)"
author: "رامین مجاب"
output: md_document
---
##  مثال ۱-۲: شناسایی نوع ماتریس‌ها (ادامهٔ مقدمه‌ای بر برنامه‌نویسی)
<p style='font-size: 0.8em;'><b>نویسنده:</b> <span>رامین مجاب</span></p>

**(صفحهٔ ۱۵ کتاب)**

مثال حاضر حاوی بررسی مجموعهٔ تعاریف بخش ۲-۱ (صفحهٔ ۱۱ در کتاب) در **R** است. اگر در تابع `matrix()` ورودی `data` یک عدد باشد، ماتریسی ایجاد می‌شود که تمام درایه‌هایش برابر با اسکالر داده شده است. مثال زیر را ببینید:


``` r
> matrix(2.5, nrow = 1, ncol = 3)
```

```
#      [,1] [,2] [,3]
# [1,]  2.5  2.5  2.5
```

برای ایجاد بردار واحد، اول برداری با اندازهٔ موردنظر ایجاد می‌کنیم که تمام درایه‌هایش صفر است؛ سپس درایهٔ موردنظر را برابر با یک می‌گذاریم. کد زیر را ببینید:


``` r
> e_2 <- matrix(0, nrow = 3, ncol = 1)
> e_2[2] <- 1
> e_2
```

```
#      [,1]
# [1,]    0
# [2,]    1
# [3,]    0
```

بررسی این موضوع که آیا یک ماتریس مربع است یا خیر، با بررسی تساوی تعداد سطرها و ستون‌ها امکان‌پذیر است. در کد زیر علاوه بر این موضوع، تابع `ifelse()` نیز معرفی می‌شود:


``` r
> ifelse(nrow(e_2) == ncol(e_2),
+   "matrix is square", "matrix is not square"
+ )
```

```
# [1] "matrix is not square"
```

در این کتاب در بیشتر مواقع، توضیحاتی دربارهٔ ورودی‌ها و خروجی‌های توابع ارائه نمی‌شود. علت آن است که **R** و بسته‌های بیرونی آن (مخصوصاً وقتی در `CRAN` قرار دارند؛ نگاه کنید به: [مثال۲-۴](matrix_book_fa_example2.4))، توضیحات کاملی برای توابع ارائه می‌کنند؛ مثلاً، کافی است دستور ‍`?ifelse` را اجرا کنید و اطلاعاتی از تابع به‌دست آورید. به علامت سؤال قبل از نام متغیر دقت کنید. بسته به محیطی که استفاده می‌کنید، نحوهٔ نمایش اطلاعات متفاوت است؛ مثلاً در محیط `RStudio`، توضیحات در یک پنجرهٔ مجزا نمایش داده می‌شود.

برای ساخت یک ماتریس قطری، از تابع `diag()` استفاده کنید. همچنین با استفاده از توابع `lower.tri()` یا `upper.tri()`، می‌توان ماتریس‌های بالامثلثی یا پایین‌مثلثی ساخت. مثال زیر را ببینید:


``` r
> A <- matrix(c(1, 2, 3, 4, 5, 6, 7, 8, 9), nrow = 3)
> A[lower.tri(A)] <- 0
> A
```

```
#      [,1] [,2] [,3]
# [1,]    1    4    7
# [2,]    0    5    8
# [3,]    0    0    9
```

خط دوم در این کد تمام درایه‌های زیر قطر را برابر با صفر قرار می‌دهد و بنابراین یک ماتریس بالامثلثی ایجاد می‌شود.

بررسی تساوی دو ماتریس با کمک تابع `all()` امکان‌پذیر است؛ به‌عنوان مثال، در کد زیر متقارن یا پادمتقارن‌بودن یک ماتریس بررسی می‌شود:


``` r
> A <- matrix(c(0, 2.1, -1, -2.1, 0, 3.4, 1, -3.4, 0), nrow = 3)
> ifelse(
+   nrow(A) == ncol(A) && all(A == -t(A)),
+   "matrix is skew-symmetric",
+   "matrix is not skew-symmetric"
+ )
```

```
# [1] "matrix is skew-symmetric"
```

در شرط از علامت `&&` استفاده شده و به این معنی است که هر دو شرط داده‌شده با یکدیگر باید برقرار باشند. همچنین، تابع `t()` ترانهادهٔ ماتریس را محاسبه می‌کند (نگاه کنید به: بخش ۲.۱ کتاب). به‌عنوان تمرین، کدی برای بررسی متقارن‌بودن یک ماتریس بنویسید.

دستور `all(A == B)` برای ماتریس‌های حقیقی مناسب نیست، زیرا اعداد حقیقی در کامپیوتر به‌صورت دودویی ذخیره می‌شوند و خطای گردشدن کوچکی وجود دارد. بنابراین، روش مناسب‌تر استفاده از تابع `all.equal()` است که در آن برابری تقریبی دو ماتریس بررسی می‌شود؛ به‌عنوان مثال، با استفاده از توابع `diag()`، `lower.tri()`، یا `upper.tri()`، می‌توان بررسی کرد که آیا یک ماتریس قطری یا مثلثی است. کد زیر یک مثال در این زمینه است:


``` r
> A <- matrix(c(1, 2, 3, 0, 4, 5, 0, 1e-10, 6), nrow = 3)
> all.equal(A, upper.tri(A, diag = TRUE) * A)
```

```
# [1] "Mean relative difference: 1"
```

علامت `*` در بخش ۱-۶ (صفحهٔ ۲۲ در کتاب) توضیح داده می‌شود. همچنین، کاراکتر `e` درون `1e-10` به عدد $e$ ربطی ندارد. این نمایش را اصطلاحاً نماد علمی یا `scientific notation` می‌خوانیم. در این مورد خاص برابر با $10^{-10}$ است که عدد بسیار کوچکی است.



<p style='margin-bottom:3cm;'></p><hr/>

- [مثال ۱-۱: تعریف یک ماتریس (مقدمه‌ای بر برنامه‌نویسی)](matrix_book_fa_example1.1.html)
- [مثال ۱-۳: جمع دو ماتریس (نوشتن یک تابع)](matrix_book_fa_example1.3.html)
- [<b>لیست مثال‌ها</b>](matrix_book_fa.html)
